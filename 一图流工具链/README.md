# 一图流视频制作工具

本脚本是为了方便制作「一图流」字幕而设计的。

<br>

## 前置需求

在使用此脚本之前，完成以下要求之一即可：

- 要么把这个脚本放到「消极压制命令行」里执行；
- 要么在脚本同目录下放置一个 ffmpeg.exe；
- 要么把 ffmpeg 所在目录配置到你的 PATH 环境变量上。



## 使用方法

修改 `encode-base.bat` 中相应的参数，然后双击运行即可。

生成的一图流视频可以用来直接发布，也可以拿来做字幕。

<br>

## encode-base.bat 参数说明

| 配置项                                              | 说明                                                         |
| --------------------------------------------------- | ------------------------------------------------------------ |
| FINAL_FILENAME                                      | 输出的视频名字                                               |
| ORIGINAL_AUDIO_VIDEO_PATH                           | 音频文件的路径，可以是任何格式，只要 ffmpeg 支持即可。本脚本会将该音频编码为 AAC 音频格式。<br /> **注:** 当 AAC_AUDIO_PATH 指向的路径存在时，此设置无效。 |
| COVER_PATH                                          | 「一图流」图片的路径。                                       |
| AAC_AUDIO_PATH                                      | 如果下载下来的视频 / 音频文件已经是 AAC 编码，则可以直接将视频或音频文件的路径填到这里，可以省掉一大段编码时间。（ **例:**  从 YouTube 下载时格式选择了 AAC；某网站上下载的广播原本就是 AAC 编码）<br /> **注:** 当该路径不存在时，脚本会把 ORIGINAL_AUDIO_VIDEO_PATH 所指向的音频文件编码为 AAC，并输出到该路径。 |
| FRAME_RATE                                          | 一图流视频的帧率，**建议保留默认值（30 帧每秒）**。          |
| AAC_BITRATE<br />**[高级参数，无需修改]**           | 本脚本进行 AAC 编码时会按照这里设置的码率来编码。**建议保留默认值**（即 256 Kbps）。 |
| BASE_VIDEO_GOP_LENGTH<br />**[高级参数，无需修改]** | 一图流视频的 GoP（Group of Pictures）长度（单位：秒）。该值越大，则压出的视频大小就越接近音频大小（即视频部分几乎不占空间），但是 Aegisub 等软件打开时就越卡。 **建议保留默认值 5** ，实践证明设为 5-10 时，生成的视频大小较合理，且易于打开。 |
| BASE_VIDEO_CRF<br />**[高级参数，无需修改]**        | 压制一图流视频、最终视频时的 CRF（质量分数）参数。**建议保留默认值 16**，实践证明该值生成的视频画质良好，大小可接受。 |



